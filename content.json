{"meta":{"title":"阿Ben的网络日志","subtitle":"记录我的学习笔记与生活感想","description":"","author":"Ben","url":"https://benlogs.com"},"pages":[{"title":"关于我","date":"2022-09-02T14:38:12.000Z","updated":"2022-09-02T14:59:16.575Z","comments":false,"path":"about/index.html","permalink":"https://benlogs.com/about/index.html","excerpt":"","text":"Hi! 我是Ben，这是我的个人网站，这里主要是一些个人的学习笔记以及学习心德。如果您有任何问题及建议，请与我联系！Hi! I’m Ben,this is my personal website.Here are some personal study notes and minds.If you have any questions and suggestions,please contact me !My Email: &#120;&#x40;&#x62;&#x65;&#110;&#108;&#111;&#x67;&#x73;&#x2e;&#99;&#111;&#109; Thanks! 2022 in China"}],"posts":[{"title":"Sentence Patterns（句子模型）","slug":"英语的句型","date":"2022-09-02T04:30:00.000Z","updated":"2022-09-02T06:41:47.650Z","comments":true,"path":"2022/0902/英语的句型/","link":"","permalink":"https://benlogs.com/2022/0902/%E8%8B%B1%E8%AF%AD%E7%9A%84%E5%8F%A5%E5%9E%8B/","excerpt":"","text":"Sentence Patterns（句子模型）“Sentence patterns” is just another way talk about the way a sentence is put together; the order of the elements（要素） in the sentence; sentence construction（结构）. Some sources say there are six English sentence patterns; some say eight. A few sources list even more. Here are the ones we feel are the most common（常见的&#x2F;普通的）, and the easiest to recognize（识别&#x2F;辨别）: 1. Subject + Verb (S-V)（主+谓&#x2F;动）This is the simplest kind of sentence. It consists of a subject, a verb, and possibly some adjectives（形容词）, adverbs（副词）, or prepositional phrases（介词短语）. There are no direct objects（直接宾语&#x2F;受词）, indirect objects（间接宾语）, or complements（宾语补足语）. Abraham speaks fluently. (subject, verb, adverb) 亚伯拉罕说话流利。（主+谓+副） Many of the class members write well in class. (subject, verb, adverbs) (The “complete” subject is “Many of the class members”–a noun phrase.) “Many of the class members”为名词短语。 2. Verb + Subject (V-S)（动+主+介词短语）Sentences in English usually have the subject come first, followed by the verb. But when a sentence begins with there is, there was, there are, there were, the verb comes first, followed by the subject. The word There is never a subject! There is a strange shadow in the woods. (verb, subject–the complete subject is the noun phrase a strange shadow, adverb) There were no leftovers（剩饭菜） after the buffet（自助餐）. (verb, subject, adverb) 3. Subject + Verb + Direct Object (S-V-DO) Andrew composes music. (subject, verb, direct object.) Matthew helps others in several English practice rooms. (subject, verb, direct object, adverb) Helen tells jokes to make people smile. (subject, verb, direct object, adverb) adverb 副词 英语wiki说明： An adverb is a word that modifies（修饰） a verb, adjective, another adverb, determiner（限定词）, noun phrase, clause（从句）, or sentence. Adverbs typically express manner（通常表示方式）, place, time, frequency, degree（程度）, level of certainty（确定）, etc（&#x3D;et cetera (缩)等等）., answering questions such as how?, in what way?, when?, where?, and to what extent?. This function is called the adverbial function, and may be realized（认识&#x2F;实现） by single words (adverbs) or by multi-word expressions (adverbial phrases and adverbial clauses).Adverbs are traditionally regarded（传统上被视为） as one of the parts of speech（词性）. However, modern linguists（现代语言学家） note that it has come to be used as a kind of “catch-all” category, used to classify（将..分类） words with various（各种各样的） different types of syntactic behavior（句法行为）, not necessarily having much in common except that they do not fit into(适合&#x2F;适应；符合) any of the other available categories(可用类别) (noun, adjective, preposition, etc.) 4. Subject + Verb + Complement (S-V-SC)A complement is a word or group of words that describe or rename the subject. Complements follow a linking verb. There are two kinds of subject complements: 1) predicate nominative, which is a noun or pronoun that renames or classifies the subject of the sentence and 2) predicate adjective, which is an adjective that describes the subject of the sentence. Mother looks tired. (subject, verb, complement–predicate adjective) Some students in the class are engineers. (the noun phrase Some students in the class is the complete subject, verb, complement–predicate nominative) The men are handsome, the women are clever, and the children are above-average. (compound sentence of three independent clauses, so three subjects, three verbs, three complements–all predicate adjectives) 生词： SC&#x3D;Subject Complement&#x3D;主词补语； linking verb&#x3D;系动词； predicate nominative&#x3D;谓语主格； predicate adjective&#x3D;谓语性形容词; classifies&#x3D;class +ify+三单形式&#x3D;将…分类，三单详解； 5. Subject + Verb + Indirect Object + Direct Object (S-V-IO-DO)An indirect object tells for whom or to whom. If the indirect object comes after the direct object (in a prepositional phrase “to ________” or “for _______”), the sentence pattern is shown as S-V-DO-IO. Pronouns are usually used as indirect objects (but not always). I sent her a birthday present. (subject, verb, indirect object, direct object) Jay gave his dog a bone. (subject, verb, indirect object, direct object) Granny left Gary all of her money. (subject, verb, indirect object, direct object) Granny gave every last asset to Gary. (subject, verb, direct object, indirect object in a prepositional phrase) 6. Subject + Verb + Direct Object + Object Complement (S-V-DO-OC)This pattern isn’t as common as the others, but it is used. An object complement is a word or group of words that renames, describes, or classifies the direct object. Object complements are nouns or adjectives and follow the object. Debbie left the window open during the rain storm. (subject, verb, direct object, object complement, adverb) The class picked Susie class representative. (subject, verb, direct object, object complement) Sentence Pattern QuizSome patterns in using clauses: Independent clause: We are happy about the approaching holiday season. Two independent clauses joined with a coordinating conjunction: We are happy about the approaching holiday season, and we look forward to a prosperous new year. Two independent clauses, with no conjunction: We are happy about the approaching holiday season; we look forward to a prosperous new year. Two independent clauses with an independent marker (therefore, moreover, thus, consequently, however, also are some): We are happy about the approaching holiday season; furthermore, we look forward to a prosperous new year. Dependent marker (because, since, while, although, if, until, when, as, after, then are some), dependent clause, independent clause: Because we are happy about the approaching holiday season, we are planning many parties and gatherings with friends. Independent clause, dependent marker, dependent clause: We are planning many parties and gatherings with friends, because we are happy about the approaching holiday season. First part of an independent clause, unneeded clause or phrase, the rest of the independent clause: We are planning many parties and gatherings, including formal and informal, with friends. First part of an independent clause, essential clause or phrase, the rest of the independent clause: We who are happy about the approaching holiday season are planning many parties and gatherings, formal and informal, with friends.","categories":[{"name":"English","slug":"English","permalink":"https://benlogs.com/categories/English/"}],"tags":[{"name":"grammar","slug":"grammar","permalink":"https://benlogs.com/tags/grammar/"},{"name":"english","slug":"english","permalink":"https://benlogs.com/tags/english/"},{"name":"Sentence","slug":"Sentence","permalink":"https://benlogs.com/tags/Sentence/"}],"keywords":[{"name":"English","slug":"English","permalink":"https://benlogs.com/categories/English/"}]},{"title":"阿里云申请免费SSL证书并部署到docker中的halo","slug":"阿里云申请免费ssl证书并部署到docker中的halo","date":"2022-08-30T10:30:00.000Z","updated":"2022-08-30T09:26:14.948Z","comments":true,"path":"2022/0830/阿里云申请免费ssl证书并部署到docker中的halo/","link":"","permalink":"https://benlogs.com/2022/0830/%E9%98%BF%E9%87%8C%E4%BA%91%E7%94%B3%E8%AF%B7%E5%85%8D%E8%B4%B9ssl%E8%AF%81%E4%B9%A6%E5%B9%B6%E9%83%A8%E7%BD%B2%E5%88%B0docker%E4%B8%AD%E7%9A%84halo/","excerpt":"","text":"阿里云申请免费SSL证书并部署到docker中的halo1、申请阿里云免费ssl0元购买地址：云盾证书服务 管理证书SSL证书管理控制台–&gt;SSL证书–&gt;免费证书，创建证书 创建证书之后，点击“证书申请”，填写相关信息提交申请。 填写资料提交申请的过程中，需要进行域名解析，例如： 2、部署到网站2.1、下载证书 下载完后得到两个文件，如下 2.2 、上传证书到云服务器创建证书目录，并使用sftp工具将上传到该目录，如： 1mkdir /smartwirecom/cert 配置nginx.conf文件，注意80端口、445端口是否被其他软件或nginx的server占用，可以使用lsof -i:80指令查询占用情况。 配置文件如下（可以用vi、vim或sftp工具修改）： 1234567891011121314151617181920212223242526272829303132333435363738394041# 监听80端口，并将其重定向到httpsserver &#123; listen 80; # 将smartwirecom.net改为您自己的域名 server_name smartwirecom.net; # 上传文件大小的限制 client_max_body_size 1024m; # 将所有http请求通过rewrite重定向到https。 rewrite ^(.*)$ https://$host$1 permanent; &#125; ## 配置sslserver &#123; listen 443 ssl; # 将smartwirecom.net改为您自己的域名 server_name smartwirecom.net; # 上传文件大小的限制 client_max_body_size 1024m; # 将证书文件存放路径和证书的密钥文件名替换成自己存放路径与证书的密钥文件名。 ssl_certificate /smartwirecom/cert/xxxxx_smartwirecom.net.pem; ssl_certificate_key /smartwirecom/cert/xxxxx_smartwirecom.net.key; ssl_session_timeout 5m; ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4; ssl_protocols TLSv1 TLSv1.1 TLSv1.2; ssl_prefer_server_ciphers on; location / &#123; proxy_set_header HOST $host; proxy_set_header X-Forwarded-Proto $scheme; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; # 下面8090是您配置Halo的端口号，笔者这里使用默认端口。 proxy_pass http://127.0.0.1:8090/; &#125;&#125; 重启nignx：systemctl restart nginx 或者nginx -s reload 效果：","categories":[{"name":"Web","slug":"Web","permalink":"https://benlogs.com/categories/Web/"}],"tags":[],"keywords":[{"name":"Web","slug":"Web","permalink":"https://benlogs.com/categories/Web/"}]},{"title":"单网口OpenWRT设备 + 网管交换机通过VLAN 实现网口拓展、流量隔离","slug":"单网口OpenWRT设备 + 网管交换机通过VLAN 实现网口拓展、流量隔离","date":"2022-08-30T10:30:00.000Z","updated":"2022-08-30T09:27:06.767Z","comments":true,"path":"2022/0830/单网口OpenWRT设备 + 网管交换机通过VLAN 实现网口拓展、流量隔离/","link":"","permalink":"https://benlogs.com/2022/0830/%E5%8D%95%E7%BD%91%E5%8F%A3OpenWRT%E8%AE%BE%E5%A4%87%20+%20%E7%BD%91%E7%AE%A1%E4%BA%A4%E6%8D%A2%E6%9C%BA%E9%80%9A%E8%BF%87VLAN%20%E5%AE%9E%E7%8E%B0%E7%BD%91%E5%8F%A3%E6%8B%93%E5%B1%95%E3%80%81%E6%B5%81%E9%87%8F%E9%9A%94%E7%A6%BB/","excerpt":"","text":"手里有两台设备，单网口OpenWRT设备 + 网管型交换机。我们该如何通过VLAN 实现网口拓展、流量隔离，进而将N1盒子如何成为一个主路由？ 要回答这个问题，我们要先了解一下什么是VLAN？为什么需要VLAN？ VLAN是什么虚拟局域网（Virtual Local Area Network或简写VLAN,V-LAN）是一种建构于局域网交换技术（LAN Switch）的网络管理的技术，网管人员可以借此透过控制交换机有效分派出入局域网的报文到正确的出入端口，达到对不同实体局域网中的设备进行逻辑分群（Grouping）管理，并降低局域网内大量数据流通时，因无用报文过多导致壅塞的问题，以及提升局域网的信息安全保障。[1] 为什么需要VLAN简单来说当我们使用单网口路由器的时候，用一个网口同时处理WAN口与LAN口数据时容易造成报文壅塞，严重时可能造成网络风暴。所以即使我们只有一个网口，我们希望通过某些方式做到逻辑隔离，有效减少无用报文提高数据交换效率。 而VLAN便是一种实现交换机以太网广播隔离的一种理想解决方案，它可以为网络提供以下作用： 1 广播控制2 带宽利用3 降低延迟4 安全性 所以单网口路由器加上VLAN便可以做为一个主力路由器。 为保证不同交换机能通过VLAN通信，1995年IEEE802委员会发表了802.1QVLAN技术的实现标准与帧结构。具体细节可自行Google查询。 前置条件 1 支持基于IEEE 802.1Q VLAN管理交换机2 单网口OpenWRT设备（N1盒子） 题图是楼主自家的设备集合，一个N1盒子、一个8口全千兆管理型交换机、一个无线路由器。 基本原理与拓扑架构通过交换机的管理页面，将网络划分为两个VLAN： VLAN10 为LAN口网络，包含端口2-6VLAN100 为WAN口网络，包含端口1-2 其中端口2为公用端口(tagged port)，同时处理WAN口、LAN口两种流量，其他口为untagged port。 VLAN 设置 t&#x3D;tagged u&#x3D;untagged 然后为每个端口设置PVID，其作用是为所有不带标签的VLAN数据流进来时打上标签。 如光猫数据从端口1进来此时不带任何标签，经过端口1后便打上了100的标签，随后在VLAN100 的 VLAN 里面流通，找到唯一一个出口端口2，带上标签进入OpenWRT路由器。 PVID设置 结合以下拓扑图，我们不难分析数据走向（相同颜色即为同一VLAN）： 1 无标签数据从光猫进入交换机的网口1，被打上100的标签2 标签100只在属于VLAN100，所以找到唯一的一个可连接的端口2，从端口2进入路由器3 路由器设置了WAN口连接VLAN100，LAN口连VLAN10。CPU处理带标签100的数据后，然后转换成标签10的数据流回端口24 数据流向端口3-6，从端口出去时将ID去掉，给到无线路由器或者有线PC等设备(各种设备对VLAN无感知)5 从WAN到LAN的数据流结束 单网口OpenWRT设备 + 网管交换机的VLAN拓扑 如何设置请参考视频资料，单网口OpenWRT设备如何设置VLAN？N1盒子如何成为主路由？最终实现网口拓展、流量隔离：https://www.bilibili.com/video/BV1B7411E7sK/。 1 交换机设置 VLAN划分设置 VLAN划分 PVID设置 PVID设置 2 OpenWRT接口设置 LAN桥接到 **eth0.10**，即使用VLAN10 LAN口设置 WAN口设置到 **eth0.100**，即连接到VLAN100。 WAN口设置 3 防火墙设置 将之前单臂路由时所设置的防火墙规则删掉或者注释掉，换为第二行的规则。 12#iptables -t nat -I POSTROUTING -o eth0 -j MASQUERADEiptables -t nat -I POSTROUTING -o pppoe-WAN -j MASQUERADE 总结通过VLAN的划分我们的单网口路由即可摇身一变成主路由，同时WAN口&#x2F;LAN口的数据流量不冲突、不会造成潜在的风险。剩余的3-8口都可以作为LAN口，只需要把网络设备接上即可正常上网。","categories":[{"name":"网络","slug":"网络","permalink":"https://benlogs.com/categories/%E7%BD%91%E7%BB%9C/"}],"tags":[],"keywords":[{"name":"网络","slug":"网络","permalink":"https://benlogs.com/categories/%E7%BD%91%E7%BB%9C/"}]},{"title":"hexo+github部署个人网站","slug":"如何使用github部署个人网站","date":"2022-08-29T08:30:00.000Z","updated":"2022-09-02T16:31:20.757Z","comments":true,"path":"2022/0829/如何使用github部署个人网站/","link":"","permalink":"https://benlogs.com/2022/0829/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8github%E9%83%A8%E7%BD%B2%E4%B8%AA%E4%BA%BA%E7%BD%91%E7%AB%99/","excerpt":"","text":"使用hexo+github部署个人网站1、M1中安装hexo参考：https://zhuanlan.zhihu.com/p/546198492 1.1、node.js安装因为后面要用到npm install，而npm被集成到了node中，所以首先来安装下node.js。 下载地址：node.js下载 如下图：M1的选择ARM64那个 安装成功后，可在终端通过-v查看是否安装成功： 12node -v #查看node版本npm -v #查看npm版本 1.2、安装hexo安装hexo代码，在终端输入： 1npm install hexo-cli -g 我在执行这一步的时候报错提示： Error: EACCES: permission denied, mkdir ‘&#x2F;usr&#x2F;local&#x2F;lib&#x2F;node_modules&#x2F;hexo-cli’ 搜了一下，是mac和win都很普遍的权限问题，解决方法如下： 1sudo chown -R $(whoami) $(npm config get prefix)/&#123;lib/node_modules,bin,share&#125; #修改权限范围 然后再次执行npm install hexo-cli -g即可 1.3.初始化本地博客文件夹1234# 博客初始化，这里是创建的本地博客文件夹，执行后会自动创建，我这里图简洁，直接用了我网站的地址hihulu.github.io为文件名hexo init /Users/bentou/hexo/hihulu.github.io cd /Users/bentou/hexo/hihulu.github.io # 进入本地的博客文件夹hexo server # 打开本地服务器预览 以上执行后，你就可以通过访问本地网站“http://localhost:4000/”，看到自己网站的一个大概啦 2、安装主题使用的主题：https://github.com/chaooo/hexo-theme-BlueLake 安装说明：https://chaooo.github.io/2016/12/29/bluelake.html 3、GitHub上部署3.1、创建仓库 3.2、配置git在仓库的code页面，复制ssh链接： 在根_config.yml文件deploy中，填入ssh地址： 1234deploy: type: git repo: git@github.com:hokbam/hokbam.github.io.git #这个地址是从github仓库复制过来的ssh branch: main 当使用hexo d将项目push到GitHub时，可能会出错，因为本机中没有配置ssh信息： 参考解决方案：https://blog.csdn.net/weixin_45434534/article/details/104567870 在mac终端进行如下操作： 1234ssh-keygen -t rsa -C &quot;此处为GitHub的邮箱地址&quot;ssh -v git@github.comssh-agent -sssh-add ~/.ssh/id_rsa 将生成的.pub文件中的内容，在GitHub上创建SSH KEY GitHub网站路径：右上角头像-&gt;Setting： 再次执行 hexo clean &amp;&amp; hexo deploy，git上传成功：","categories":[{"name":"Linux","slug":"Linux","permalink":"https://benlogs.com/categories/Linux/"}],"tags":[],"keywords":[{"name":"Linux","slug":"Linux","permalink":"https://benlogs.com/categories/Linux/"}]},{"title":"markdown测试","slug":"MarkDown测试","date":"2022-08-28T10:30:00.000Z","updated":"2022-08-29T07:56:19.021Z","comments":true,"path":"2022/0828/MarkDown测试/","link":"","permalink":"https://benlogs.com/2022/0828/MarkDown%E6%B5%8B%E8%AF%95/","excerpt":"","text":"1、表情符号https://www.webfx.com/tools/emoji-cheat-sheet/ :100: :two::three::four::five::six::seven::heavy_check_mark::heavy_multiplication_x: :ballot_box_with_check: H^2^ 2、脚注驿外[^注1]断桥边，寂寞开无主。&#x3D;&#x3D;已是黄昏独&#x3D;&#x3D;自愁，更着风和雨[^注1]:驿（yì）外：指荒僻、冷清之地。驿，驿站。 3、列表 Apple Banana 1 2 3 a b c 12345sudio -iab#cc 4、公式$$\\sqrt{3x-1}+(1+x)^2&#x3D;{x*100}$$ $$\\begin{array}{c} \\nabla \\times \\vec{\\mathbf{B}} -, \\frac1c, \\frac{\\partial\\vec{\\mathbf{E}}}{\\partial t} &amp;&#x3D; \\frac{4\\pi}{c}\\vec{\\mathbf{j}} \\nabla \\cdot \\vec{\\mathbf{E}} &amp; &#x3D; 4 \\pi \\rho \\ \\nabla \\times \\vec{\\mathbf{E}}, +, \\frac1c, \\frac{\\partial\\vec{\\mathbf{B}}}{\\partial t} &amp; &#x3D; \\vec{\\mathbf{0}} \\ \\nabla \\cdot \\vec{\\mathbf{B}} &amp; &#x3D; 0 \\end{array}$$ 5、图表使用说明 5.1、流程图有关更多详细信息，请参见这些说明。 12345678910graph TD;A[开始];B(工作经验);C(经济实力);D(语言能力);E[成功]; A--&gt;|111|B; A--&gt;|222|C; A--&gt;|333|D; B--&gt;|1111|E;C--&gt;|2222|E;D--&gt;|3333|E; 123456graph LRA[开始] --&gt;B(Round edge) B --&gt; C&#123;Decision&#125; C --&gt;|One| D[Result one] C --&gt;|Two| E[Result two] C --&gt;|打回| A 12345678st=&gt;start: Startop=&gt;operation: Your Operationcond=&gt;condition: Yes or No?e=&gt;endst-&gt;op-&gt;condcond(yes)-&gt;econd(no)-&gt;op 5.2、顺序图有关更多详细信息，请参见这些说明。 123456789101112sequenceDiagram participant Alice participant Bob Alice-&gt;&gt;John: Hello John, how are you? loop Healthcheck John-&gt;&gt;John: Fight against hypochondria end Note right of John: Rational thoughts &lt;br/&gt;prevail! John--&gt;&gt;Alice: Great! John-&gt;&gt;Bob: How about you? Bob--&gt;&gt;John: Jolly good! 5.3、Gantt Charts有关更多详细信息，请参见这些说明。 12345678910111213141516171819202122232425262728%% Example with selection of syntaxes gantt dateFormat YYYY-MM-DD title Adding GANTT diagram functionality to mermaid section A section Completed task :done, des1, 2014-01-06,2014-01-08 Active task :active, des2, 2014-01-09, 3d Future task : des3, after des2, 5d Future task2 : des4, after des3, 5d section Critical tasks Completed task in the critical line :crit, done, 2014-01-06,24h Implement parser and jison :crit, done, after des1, 2d Create tests for parser :crit, active, 3d Future task in critical line :crit, 5d Create tests for renderer :2d Add to mermaid :1d section Documentation Describe gantt syntax :active, a1, after des1, 3d Add gantt diagram to demo page :after a1 , 20h Add another diagram to demo page :doc1, after a1 , 48h section Last section Describe gantt syntax :after doc1, 3d Add gantt diagram to demo page : 20h Add another diagram to demo page : 48h 5.4、类图有关更多详细信息，请参见这些说明。 123456789101112131415161718192021classDiagram Animal &lt;|-- Duck Animal &lt;|-- Fish Animal &lt;|-- Zebra Animal : +int age Animal : +String gender Animal: +isMammal() Animal: +mate() class Duck&#123; +String beakColor +swim() +quack() &#125; class Fish&#123; -int sizeInFeet -canEat() &#125; class Zebra&#123; +bool is_wild +run() &#125; 5.5、状态图有关更多详细信息，请参见这些说明。 12345678stateDiagram [*] --&gt; Still Still --&gt; [*] Still --&gt; Moving Moving --&gt; Still Moving --&gt; Crash Crash --&gt; [*] 5.6、饼图12345pie title Pie Chart &quot;Dogs&quot; : 386 &quot;Cats&quot; : 85 &quot;Rats&quot; : 150 123456789journey title My working day section Go to work Make tea: 5: Me Go upstairs: 3: Me Do work: 1: Me, Cat section Go home Go downstairs: 5: Me Sit down: 3: Me 视频2","categories":[{"name":"Linux","slug":"Linux","permalink":"https://benlogs.com/categories/Linux/"}],"tags":[],"keywords":[{"name":"Linux","slug":"Linux","permalink":"https://benlogs.com/categories/Linux/"}]},{"title":"如何离线升级openssh和openssl","slug":"离线升级opensshopenssl","date":"2022-08-28T10:30:00.000Z","updated":"2022-09-02T06:39:26.093Z","comments":true,"path":"2022/0828/离线升级opensshopenssl/","link":"","permalink":"https://benlogs.com/2022/0828/%E7%A6%BB%E7%BA%BF%E5%8D%87%E7%BA%A7opensshopenssl/","excerpt":"","text":"如何离线升级openssh和openssl1、环境检查 先确保你的服务器上已经有gcc，gcc-c++。这两个是编译工具。 1rpm -qa |grep gcc 缺少 正常应该是这样 缺少则安装gcc等编译环境 123#把相关的rpm包全部放到gcc文件夹#进入gcc文件夹，忽略依赖安装rpm -Uvh --force --nodeps *.rpm 2、编译安装openssl下载最新版：https://mirrors.cloud.tencent.com/openssl/source/ 123456789101112131415161718192021222324252627282930313233#备份旧版mv /usr/lib64/libcrypto.so.1.0.2k /usr/lib64/libcrypto.so.1.0.2k_bak mv /usr/lib64/libssl.so.1.0.2k /usr/lib64/libssl.so.1.0.2k_bak #解压tar -zxvf openssl-1.0.2k.tar.gzcd openssl-1.0.2k#添加openssl配置./config --prefix=/usr/local/openssl#编译make#卸载旧版本for i in $(rpm -qa |grep openssl);do rpm -e $i --nodeps ;done#安装make install#配置相关软链echo &quot;/usr/local/openssl/lib&quot; &gt;&gt; /etc/ld.so.confldconfigcp /usr/local/openssl/lib/libssl.so.1.1 /lib64/libssl.so.1.1cp -f /usr/local/openssl/lib/libssl.so.1.1 /usr/lib64/libssl.so.1.1cp /usr/local/openssl/lib/libcrypto.so.1.1 /usr/lib64ln -sf /usr/lib64/libcrypto.so.1.1 /usr/lib64/libcrypto.so.10ln -sf /usr/lib64/libcrypto.so.1.1 /lib64/libcrypto.so.10ln -sf /usr/lib64/libcrypto.so.1.1 /usr/lib64/libcrypto.soln -sf /usr/lib64/libssl.so.1.1 /usr/lib64/libssl.so.10ln -sf /usr/lib64/libssl.so.1.1 /usr/lib64/libssl.soln -sf /usr/local/openssl/bin/openssl /usr/bin/opensslln -sf /usr/local/openssl/include/openssl /usr/include/opensslopenssl version -a#修改1.0版软链mv /usr/lib64/libcrypto.so.1.0.2k_bak /usr/lib64/libcrypto.so.1.0.2kln -fs /usr/lib64/libcrypto.so.1.0.2k /usr/lib64/libcrypto.so.10mv /usr/lib64/libssl.so.1.0.2k_bak /usr/lib64/libssl.so.1.0.2kln -sf /usr/lib64/libssl.so.1.0.2k /usr/lib64/libssl.so.10 3、编译安装openssh下载最新版：https://cdn.openbsd.org/pub/OpenBSD/OpenSSH/portable/ 12345678910111213141516171819202122232425262728#进入openssh文件夹，并配置./configure --prefix=/usr --sysconfdir=/etc/ssh --with-ssl-dir=/usr/local/openssl#执行makemake#卸载 旧版本的opensshfor i in $(rpm -qa |grep openssh);do rpm -e $i --nodeps ;done#安装新版本opensshsudo make install#查看新版的本号ssh -V// 在使用ssh登陆试试sudo cp contrib/redhat/sshd.init /etc/init.d/sshd#加入开机启动sudo chkconfig --add sshdsudo chkconfig sshd on# 修改配置 PermitRootLogin yessudo vim /etc/ssh/sshd_configecho &quot;PermitRootLogin yes&quot; &gt;&gt; /etc/ssh/sshd_config// 重启服务sudo service sshd restart 123chmod 600 /etc/ssh/ssh_host_rsa_keychmod 600 /etc/ssh/ssh_host_ecdsa_keychmod 600 /etc/ssh/ssh_host_ed25519_key 4、升级后的问题1）无法登陆ssh12临时关闭 setenforce 0 #设置SELinux 成为permissive模式 setenforce 1 设置SELinux 成为enforcing模式 修改配置文件需要重启服务器 修改/etc/selinux/config 文件，将SELINUX=enforcing改为SELINUX=disabled 2）docker网络异常重启docker服务 1systemctl restart docker 3）Sftp账号异常因为&#x2F;etc&#x2F;ssh&#x2F;sshd_config文件更新后为全新文件，相关的配置也会被修改。需按照升级前的配置修改。","categories":[{"name":"Linux","slug":"Linux","permalink":"https://benlogs.com/categories/Linux/"}],"tags":[{"name":"gcc","slug":"gcc","permalink":"https://benlogs.com/tags/gcc/"},{"name":"ssh","slug":"ssh","permalink":"https://benlogs.com/tags/ssh/"},{"name":"ssl","slug":"ssl","permalink":"https://benlogs.com/tags/ssl/"}],"keywords":[{"name":"Linux","slug":"Linux","permalink":"https://benlogs.com/categories/Linux/"}]}]}