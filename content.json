{"meta":{"title":"阿Ben的网络日志","subtitle":"记录我的学习笔记与生活感想","description":"","author":"John Doe","url":"http://example.com"},"pages":[],"posts":[{"title":"如何离线升级openssh和openssl","slug":"离线升级opensshopenssl","date":"2022-08-28T10:30:00.000Z","updated":"2022-08-29T05:09:33.106Z","comments":true,"path":"2022/08/28/离线升级opensshopenssl/","link":"","permalink":"http://example.com/2022/08/28/%E7%A6%BB%E7%BA%BF%E5%8D%87%E7%BA%A7opensshopenssl/","excerpt":"","text":"如何离线升级openssh和openssl1、环境检查 先确保你的服务器上已经有gcc，gcc-c++。这两个是编译工具。 1rpm -qa |grep gcc 缺少 正常应该是这样 缺少则安装gcc等编译环境 123#把相关的rpm包全部放到gcc文件夹#进入gcc文件夹，忽略依赖安装rpm -Uvh --force --nodeps *.rpm 2、编译安装openssl下载最新版：https://mirrors.cloud.tencent.com/openssl/source/ 123456789101112131415161718192021222324252627282930313233#备份旧版mv /usr/lib64/libcrypto.so.1.0.2k /usr/lib64/libcrypto.so.1.0.2k_bak mv /usr/lib64/libssl.so.1.0.2k /usr/lib64/libssl.so.1.0.2k_bak #解压tar -zxvf openssl-1.0.2k.tar.gzcd openssl-1.0.2k#添加openssl配置./config --prefix=/usr/local/openssl#编译make#卸载旧版本for i in $(rpm -qa |grep openssl);do rpm -e $i --nodeps ;done#安装make install#配置相关软链echo &quot;/usr/local/openssl/lib&quot; &gt;&gt; /etc/ld.so.confldconfigcp /usr/local/openssl/lib/libssl.so.1.1 /lib64/libssl.so.1.1cp -f /usr/local/openssl/lib/libssl.so.1.1 /usr/lib64/libssl.so.1.1cp /usr/local/openssl/lib/libcrypto.so.1.1 /usr/lib64ln -sf /usr/lib64/libcrypto.so.1.1 /usr/lib64/libcrypto.so.10ln -sf /usr/lib64/libcrypto.so.1.1 /lib64/libcrypto.so.10ln -sf /usr/lib64/libcrypto.so.1.1 /usr/lib64/libcrypto.soln -sf /usr/lib64/libssl.so.1.1 /usr/lib64/libssl.so.10ln -sf /usr/lib64/libssl.so.1.1 /usr/lib64/libssl.soln -sf /usr/local/openssl/bin/openssl /usr/bin/opensslln -sf /usr/local/openssl/include/openssl /usr/include/opensslopenssl version -a#修改1.0版软链mv /usr/lib64/libcrypto.so.1.0.2k_bak /usr/lib64/libcrypto.so.1.0.2kln -fs /usr/lib64/libcrypto.so.1.0.2k /usr/lib64/libcrypto.so.10mv /usr/lib64/libssl.so.1.0.2k_bak /usr/lib64/libssl.so.1.0.2kln -sf /usr/lib64/libssl.so.1.0.2k /usr/lib64/libssl.so.10 3、编译安装openssh下载最新版：https://cdn.openbsd.org/pub/OpenBSD/OpenSSH/portable/ 12345678910111213141516171819202122232425262728#进入openssh文件夹，并配置./configure --prefix=/usr --sysconfdir=/etc/ssh --with-ssl-dir=/usr/local/openssl#执行makemake#卸载 旧版本的opensshfor i in $(rpm -qa |grep openssh);do rpm -e $i --nodeps ;done#安装新版本opensshsudo make install#查看新版的本号ssh -V// 在使用ssh登陆试试sudo cp contrib/redhat/sshd.init /etc/init.d/sshd#加入开机启动sudo chkconfig --add sshdsudo chkconfig sshd on# 修改配置 PermitRootLogin yessudo vim /etc/ssh/sshd_configecho &quot;PermitRootLogin yes&quot; &gt;&gt; /etc/ssh/sshd_config// 重启服务sudo service sshd restart 123chmod 600 /etc/ssh/ssh_host_rsa_keychmod 600 /etc/ssh/ssh_host_ecdsa_keychmod 600 /etc/ssh/ssh_host_ed25519_key 4、升级后的问题1）无法登陆ssh12临时关闭 setenforce 0 #设置SELinux 成为permissive模式 setenforce 1 设置SELinux 成为enforcing模式 修改配置文件需要重启服务器 修改/etc/selinux/config 文件，将SELINUX=enforcing改为SELINUX=disabled 2）docker网络异常重启docker服务 1systemctl restart docker 3）Sftp账号异常因为&#x2F;etc&#x2F;ssh&#x2F;sshd_config文件更新后为全新文件，相关的配置也会被修改。需按照升级前的配置修改。","categories":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/categories/Linux/"}],"tags":[],"keywords":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/categories/Linux/"}]},{"title":"markdown测试","slug":"MarkDown测试","date":"2022-08-28T10:30:00.000Z","updated":"2022-08-29T07:45:21.846Z","comments":true,"path":"2022/08/28/MarkDown测试/","link":"","permalink":"http://example.com/2022/08/28/MarkDown%E6%B5%8B%E8%AF%95/","excerpt":"","text":"1、表情符号https://www.webfx.com/tools/emoji-cheat-sheet/ :100: :two::three::four::five::six::seven::heavy_check_mark::heavy_multiplication_x: :ballot_box_with_check: H^2^ 2、脚注驿外[^注1]断桥边，寂寞开无主。&#x3D;&#x3D;已是黄昏独&#x3D;&#x3D;自愁，更着风和雨[^注1]:驿（yì）外：指荒僻、冷清之地。驿，驿站。 3、列表 Apple Banana 1 2 3 a b c 12345sudio -iab#cc 4、公式$$\\sqrt{3x-1}+(1+x)^2&#x3D;{x*100}$$ $$\\begin{array}{c} \\nabla \\times \\vec{\\mathbf{B}} -, \\frac1c, \\frac{\\partial\\vec{\\mathbf{E}}}{\\partial t} &amp;&#x3D; \\frac{4\\pi}{c}\\vec{\\mathbf{j}} \\nabla \\cdot \\vec{\\mathbf{E}} &amp; &#x3D; 4 \\pi \\rho \\ \\nabla \\times \\vec{\\mathbf{E}}, +, \\frac1c, \\frac{\\partial\\vec{\\mathbf{B}}}{\\partial t} &amp; &#x3D; \\vec{\\mathbf{0}} \\ \\nabla \\cdot \\vec{\\mathbf{B}} &amp; &#x3D; 0 \\end{array}$$ 5、图表使用说明 5.1、流程图有关更多详细信息，请参见这些说明。 12345678910graph TD;A[开始];B(工作经验);C(经济实力);D(语言能力);E[成功]; A--&gt;|111|B; A--&gt;|222|C; A--&gt;|333|D; B--&gt;|1111|E;C--&gt;|2222|E;D--&gt;|3333|E; 123456graph LRA[开始] --&gt;B(Round edge) B --&gt; C&#123;Decision&#125; C --&gt;|One| D[Result one] C --&gt;|Two| E[Result two] C --&gt;|打回| A 12345678st=&gt;start: Startop=&gt;operation: Your Operationcond=&gt;condition: Yes or No?e=&gt;endst-&gt;op-&gt;condcond(yes)-&gt;econd(no)-&gt;op 5.2、顺序图有关更多详细信息，请参见这些说明。 123456789101112sequenceDiagram participant Alice participant Bob Alice-&gt;&gt;John: Hello John, how are you? loop Healthcheck John-&gt;&gt;John: Fight against hypochondria end Note right of John: Rational thoughts &lt;br/&gt;prevail! John--&gt;&gt;Alice: Great! John-&gt;&gt;Bob: How about you? Bob--&gt;&gt;John: Jolly good! 5.3、Gantt Charts有关更多详细信息，请参见这些说明。 12345678910111213141516171819202122232425262728%% Example with selection of syntaxes gantt dateFormat YYYY-MM-DD title Adding GANTT diagram functionality to mermaid section A section Completed task :done, des1, 2014-01-06,2014-01-08 Active task :active, des2, 2014-01-09, 3d Future task : des3, after des2, 5d Future task2 : des4, after des3, 5d section Critical tasks Completed task in the critical line :crit, done, 2014-01-06,24h Implement parser and jison :crit, done, after des1, 2d Create tests for parser :crit, active, 3d Future task in critical line :crit, 5d Create tests for renderer :2d Add to mermaid :1d section Documentation Describe gantt syntax :active, a1, after des1, 3d Add gantt diagram to demo page :after a1 , 20h Add another diagram to demo page :doc1, after a1 , 48h section Last section Describe gantt syntax :after doc1, 3d Add gantt diagram to demo page : 20h Add another diagram to demo page : 48h 5.4、类图有关更多详细信息，请参见这些说明。 123456789101112131415161718192021classDiagram Animal &lt;|-- Duck Animal &lt;|-- Fish Animal &lt;|-- Zebra Animal : +int age Animal : +String gender Animal: +isMammal() Animal: +mate() class Duck&#123; +String beakColor +swim() +quack() &#125; class Fish&#123; -int sizeInFeet -canEat() &#125; class Zebra&#123; +bool is_wild +run() &#125; 5.5、状态图有关更多详细信息，请参见这些说明。 12345678stateDiagram [*] --&gt; Still Still --&gt; [*] Still --&gt; Moving Moving --&gt; Still Moving --&gt; Crash Crash --&gt; [*] 5.6、饼图12345pie title Pie Chart &quot;Dogs&quot; : 386 &quot;Cats&quot; : 85 &quot;Rats&quot; : 150 123456789journey title My working day section Go to work Make tea: 5: Me Go upstairs: 3: Me Do work: 1: Me, Cat section Go home Go downstairs: 5: Me Sit down: 3: Me 视频 视频2","categories":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/categories/Linux/"}],"tags":[],"keywords":[{"name":"Linux","slug":"Linux","permalink":"http://example.com/categories/Linux/"}]}]}